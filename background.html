<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <title>LSP Reloader</title>

  <script src="https://unpkg.com/@replit/extensions@1.9.0/dist/index.global.js"></script>
  <script>
    module = {
      exports: {}
    };
  </script>
  <script src="https://unpkg.com/ion-parser@0.5.2/parser.js"></script>
  <script>
    delete module;
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      await replit.init();

      await replit.messages.showConfirm('[LSP Reloader] BG loaded');

        await replit.extensionPort.internal.commands.registerCommand(replit.proxy({
          data: {
            id: 'lsp-reloader',
            type: 'context',
            label: 'LSP Reloader',
            description: 'A Replit extension that can reload LSPs when they die, so that you don\'t have to reboot the Repl all the time.',
            icon: 'icons/icon.png',
            contributions: ["commandbar"]
          },
          commands: async (...args) => {
            await replit.messages.showConfirm(JSON.stringify(args));

            return [];
          }
        }));
    });
  </script>
</head>

<body>

</body>

</html>